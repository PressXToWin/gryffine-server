# Gryffine

Система мониторинга и аудита попыток логина в ОС Linux (серверная часть)

## Возможности
* Отслеживание и логирование попыток входа в систему в реальном времени
* Определение уровня потенциальной опасности по заранее установленным правилам
* Уведомление о логине в Telegram и по e-mail
* Экспорт логов в популярных форматах (csv, xls)

## Как это работает
На клиентских машинах устанавливается [PAM-скрипт](https://github.com/PressXToWin/gryffine-client), который при попытке входа в систему отправляет json с информацией о входе на API-эндпоинт сервера. При этом абсолютно неважно через какой интерфейс осуществляется логин, будь это локальный вход в систему, вход через ssh или команды sudo/su. Далее, в случае удалённого входа не из локальных диапазонов, по IP-адресу устанавливается из какой страны осуществляется попытка входа (для этого используется сервис ipapi.co). После этого, проводится проверка по заранее установленным правилам (whitelist/blacklist) и в зависимости от результата устанавливается либо не устанавливается статус подозрительного входа.

## Интерфейс

## Установка
Клонируем репозиторий

```git clone https://github.com/PressXToWin/gryffine-server.git```

Создаём виртуальное окружение и устанавливаем зависимости

```
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

Копируем файл gryffine/gryffine/.env.example в gryffine/gryffine/.env и устанавливаем в нём переменные окружения

```cp gryffine/gryffine/.env.example gryffine/gryffine/.env```

Создаём суперпользователя

```python3 manage.py createsuperuser```

Запускаем сервер

```python3 manage.py runserver```

Веб-интерфейс становится доступен по адресу http://127.0.0.1:8000/

## Настройка правил

## TODO
Система полностью функциональна, однако нужно запаковать в docker-контейнер.
